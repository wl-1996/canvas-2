{"version":3,"sources":["main.js"],"names":["document","body","addEventListener","e","preventDefault","passive","canvas","getElementById","ctx","getContext","eraser","brush","reSetCanvas","aColorBtn","getElementsByClassName","save","undo","range","clear","activeColor","lWidth","autoSetSize","setCanvasBg","listenToUser","getColor","window","onbeforeunload","canvasSetSize","pageWidth","documentElement","clientWidth","pageHeight","clientHeight","console","log","width","height","onresize","color","fillStyle","fillRect","painting","lastPoint","x","undefined","y","ontouchstart","touches","clientX","clientY","drawCircle","ontouchmove","newPoint","drawLine","ontouchend","onmousedown","onmousemove","onmouseup","mouseleave","radius","beginPath","arc","Math","PI","fill","clip","clearRect","restore","x1","y1","x2","y2","lineWidth","lineCap","lineJoin","globalCompositeOperation","moveTo","lineTo","stroke","closePath","onchange","value","onclick","classList","add","remove","imgUrl","toDataURL","saveA","createElement","appendChild","href","download","Date","getTime","target","click","i","length","style","backgroundColor","strokeStyle","historyDeta"],"mappings":"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","file":"main.7decba81.js","sourceRoot":"..\\src","sourcesContent":["// 阻止微信浏览器默认向下滚动：\r\n// 同时惊喜的我发现也可以解决QQ浏览器页面滑动问题：\r\ndocument.body.addEventListener('touchmove', function (e) {\r\n    e.preventDefault();\r\n}, {passive: false});\r\n\r\nlet canvas = document.getElementById(\"drawing-board\");\r\nlet ctx = canvas.getContext(\"2d\");\r\nlet eraser = document.getElementById(\"eraser\");\r\nlet brush = document.getElementById(\"brush\");\r\nlet reSetCanvas = document.getElementById(\"clear\");\r\nlet aColorBtn = document.getElementsByClassName(\"color-item\");\r\nlet save = document.getElementById(\"save\");\r\nlet undo = document.getElementById(\"undo\");\r\nlet range = document.getElementById(\"range\");\r\n\r\n//信号量，是否要清空\r\nlet clear = false;\r\n//默认画笔颜色：\r\nlet activeColor = 'black';\r\n//默认画笔线条宽度是4\r\nlet lWidth = 4;\r\n\r\n//设置画板尺寸\r\nautoSetSize(canvas);\r\n\r\n//设置画板背景颜色\r\nsetCanvasBg('white');\r\n\r\nlistenToUser(canvas);\r\n\r\n//获取默认颜色：\r\ngetColor();\r\n\r\n//在刷新页面前弹出确认框\r\nwindow.onbeforeunload = function () {\r\n    return \"Reload site?\";\r\n};\r\n\r\n//定义设置画板尺寸函数\r\nfunction autoSetSize(canvas) {\r\n    canvasSetSize();\r\n\r\n    //定义设置画板尺寸函数核心代码：\r\n    function canvasSetSize() {\r\n        let pageWidth = document.documentElement.clientWidth;\r\n        let pageHeight = document.documentElement.clientHeight;\r\n        console.log(pageWidth, pageHeight);\r\n\r\n        canvas.width = pageWidth;\r\n        canvas.height = pageHeight;\r\n    }\r\n\r\n    //当window视口改变尺寸时调用设置画板尺寸函数\r\n    window.onresize = function () {\r\n        canvasSetSize();\r\n    };\r\n}\r\n\r\n//定义设置画板背景颜色函数：\r\nfunction setCanvasBg(color) {\r\n    ctx.fillStyle = color;\r\n    console.log(color);\r\n    //画一个矩形区域，这个矩形区域覆盖画板区域\r\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n    //what?怎么重复了\r\n    ctx.fillStyle = 'black';\r\n}\r\n\r\nfunction listenToUser(canvas) {\r\n    //设置默认不是绘画状态：\r\n    let painting = false;\r\n    //设置一个坐标\r\n    let lastPoint = {x: undefined, y: undefined};\r\n\r\n    //通过触摸API判断是否是手机设备\r\n    //手机设备监听的是触摸开始，触摸移动，触摸结束事件：\r\n    if (document.body.ontouchstart !== undefined) {\r\n        //监听触摸开始事件：\r\n        canvas.ontouchstart = function (e) {\r\n            //在这里储存绘图表面\r\n            // this.firstDot = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n            //调用saveData函数保存这个记录\r\n            // saveData(this.firstDot);\r\n            //触摸开始了，设置绘画状态为true：\r\n            painting = true;\r\n            //获取触摸的坐标：\r\n            let x = e.touches[0].clientX;\r\n            let y = e.touches[0].clientY;\r\n            //将此时触摸坐标作为最后一次坐标\r\n            lastPoint = {\"x\": x, \"y\": y};\r\n            //？\r\n            ctx.save();\r\n            //调用画圆函数画一个圆点,半径为0\r\n            drawCircle(x, y, 0);\r\n        };\r\n        //监听手机端手指滑动事件：\r\n        canvas.ontouchmove = function (e) {\r\n            //先判断绘画状态是否为true，为true时才能进行绘画：\r\n            if (painting) {\r\n                //获取移动后的坐标：\r\n                let x = e.touches[0].clientX;\r\n                let y = e.touches[0].clientY;\r\n                let newPoint = {\"x\": x, \"y\": y};\r\n                //调用画线函数画一条线将这两个点连接起来：\r\n                drawLine(lastPoint.x, lastPoint.y, newPoint.x, newPoint.y);\r\n                //然后更新最后一个点：\r\n                lastPoint = newPoint;\r\n            }\r\n        };\r\n\r\n        //监听触摸结束事件：\r\n        canvas.ontouchend = function () {\r\n            //触摸结束了，将绘画状态设为false：\r\n            painting = false;\r\n        };\r\n    }\r\n        //否则就是PC设备\r\n    //PC设备监听的是鼠标按下，鼠标移动，鼠标抬起事件：\r\n    else {\r\n        //监听鼠标按下事件：\r\n        canvas.onmousedown = function (e) {\r\n            //在这里储存绘图表面\r\n            // this.firstDot = ctx.getImageData(0, 0, canvas.width, canvas.height);//在这里储存绘图表面\r\n            // saveData(this.firstDot);\r\n            //鼠标按下就将绘画状态设为true：\r\n            painting = true;\r\n            //获取按下坐标：\r\n            let x = e.clientX;\r\n            let y = e.clientY;\r\n            lastPoint = {\"x\": x, \"y\": y};\r\n            //？\r\n            ctx.save();\r\n            //以这个坐标为圆心画一个圆：\r\n            drawCircle(x, y, 0, clear);\r\n        };\r\n        //监听鼠标移动事件：\r\n        canvas.onmousemove = function (e) {\r\n            //判断绘画状态是否为true，为true时才可以移动过程中继续画线\r\n            if (painting) {\r\n                //获取坐标：\r\n                let x = e.clientX;\r\n                let y = e.clientY;\r\n                let newPoint = {\"x\": x, \"y\": y};\r\n                //调用画线函数：\r\n                //但是不知道clear参数是干什么的？\r\n                drawLine(lastPoint.x, lastPoint.y, newPoint.x, newPoint.y, clear);\r\n                //画完线后更新最后一个点的坐标\r\n                lastPoint = newPoint;\r\n            }\r\n        };\r\n\r\n        //监听鼠标抬起事件，将绘画状态设为false：\r\n        canvas.onmouseup = function () {\r\n            painting = false;\r\n        };\r\n\r\n        //比手机端多监听一个鼠标离开事件：\r\n        //鼠标离开时将绘画状态设为false：\r\n        //否则的话鼠标离开后抬起再进入还是会画线：\r\n        canvas.mouseleave = function () {\r\n            painting = false;\r\n        };\r\n    }\r\n}\r\n\r\n//画圆函数：\r\n//给圆心坐标和半径就能得到一个圆：\r\nfunction drawCircle(x, y, radius) {\r\n    ctx.save();\r\n    ctx.beginPath();\r\n    console.log(radius);\r\n    ctx.arc(x, y, radius, 0, Math.PI * 2);\r\n    ctx.fill();\r\n    //如果clear为true：\r\n    if (clear) {\r\n        //what?\r\n        ctx.clip();\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        ctx.restore();\r\n    }\r\n}\r\n\r\n//画线函数，给两组坐标返回一条线：\r\nfunction drawLine(x1, y1, x2, y2) {\r\n    //设置线的宽度：\r\n    ctx.lineWidth = lWidth;\r\n    //what?\r\n    ctx.lineCap = \"round\";\r\n    ctx.lineJoin = \"round\";\r\n    //如果clear这个信号量为true：\r\n    if (clear) {\r\n        //？\r\n        ctx.save();\r\n        ctx.globalCompositeOperation = \"destination-out\";\r\n        ctx.moveTo(x1, y1);\r\n        ctx.lineTo(x2, y2);\r\n        ctx.stroke();\r\n        ctx.closePath();\r\n        ctx.clip();\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        ctx.restore();\r\n    } else {\r\n        //？\r\n        ctx.moveTo(x1, y1);\r\n        ctx.lineTo(x2, y2);\r\n        ctx.stroke();\r\n        ctx.closePath();\r\n    }\r\n}\r\n\r\n//监听range的change事件，一旦改变了，就将rang的值设为线的宽度：\r\nrange.onchange = function () {\r\n    //这里的this就是这个range元素：\r\n    lWidth = this.value;\r\n};\r\n\r\n//监听橡皮擦按钮点击事件：\r\neraser.onclick = function () {\r\n    //说明此时要清除内容了：\r\n    clear = true;\r\n    this.classList.add(\"active\");\r\n    brush.classList.remove(\"active\");\r\n};\r\n\r\n//监听画笔按钮点击事件：\r\nbrush.onclick = function () {\r\n    //说明此时要画画，不是要清除内容：\r\n    clear = false;\r\n    this.classList.add(\"active\");\r\n    eraser.classList.remove(\"active\");\r\n};\r\n\r\n//监听清空按钮点击事件\r\nreSetCanvas.onclick = function () {\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    setCanvasBg('white');\r\n};\r\n\r\n//监听保存按钮点击事件，点击保存时生成img图片保存到本机：\r\nsave.onclick = function () {\r\n    let imgUrl = canvas.toDataURL(\"image/png\");\r\n    let saveA = document.createElement(\"a\");\r\n    document.body.appendChild(saveA);\r\n    saveA.href = imgUrl;\r\n    saveA.download = \"zspic\" + (new Date).getTime();\r\n    saveA.target = \"_blank\";\r\n    saveA.click();\r\n};\r\n\r\n//定义获取颜色函数：\r\nfunction getColor() {\r\n    for (let i = 0; i < aColorBtn.length; i++) {\r\n        aColorBtn[i].onclick = function () {\r\n            for (let i = 0; i < aColorBtn.length; i++) {\r\n                //去掉所有颜色按钮的active类：\r\n                aColorBtn[i].classList.remove(\"active\");\r\n                //给被点击的这个按钮加上颜色类\r\n                this.classList.add(\"active\");\r\n                activeColor = this.style.backgroundColor;\r\n                ctx.fillStyle = activeColor;\r\n                ctx.strokeStyle = activeColor;\r\n            }\r\n        };\r\n    }\r\n}\r\n\r\nlet historyDeta = [];\r\n\r\n//声明一个保存历史记录的函数：\r\n// function saveData(data) {\r\n//     (historyDeta.length === 10) && (historyDeta.shift());// 上限为储存10步，太多了怕挂掉\r\n//     historyDeta.push(data);\r\n// }\r\n\r\n//监听撤销按钮点击事件：\r\n// undo.onclick = function () {\r\n//     if (historyDeta.length < 1) return false;\r\n//     ctx.putImageData(historyDeta[historyDeta.length - 1], 0, 0);\r\n//     historyDeta.pop();\r\n// };"]}